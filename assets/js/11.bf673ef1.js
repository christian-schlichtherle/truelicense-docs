(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{331:function(t,a,e){"use strict";e.r(a);var s=e(33),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"using-the-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-api"}},[t._v("#")]),t._v(" Using the API")]),t._v(" "),e("p",[t._v("Your generated project provides an internationalized Application Programming Interface (API) for vending and consuming\nlicense keys in the modules "),e("code",[t._v("keygen")]),t._v(" (alias Key Generator) and "),e("code",[t._v("keymgr")]),t._v(" (alias Key Manager) respectively.\nThis page walks you through the typical lifecycle of a license key using these modules.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The generated classes in these modules depend on the TrueLicense API, among others.\nSource code and Javadoc for the TrueLicense API are available on\n"),e("a",{attrs:{href:"https://search.maven.org/search?q=g:global.namespace.truelicense",target:"_blank",rel:"noopener noreferrer"}},[t._v("Maven Central"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("h2",{attrs:{id:"using-the-key-generator-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-key-generator-api"}},[t._v("#")]),t._v(" Using the Key Generator API")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("The Key Generator module generates license keys for your software product without requiring authorization!\nTherefore, you should keep this module under lock and key.\nIn particular, do not distribute it to users or the public.\nThe same concern applies to any derivative work which includes this module.")])]),t._v(" "),e("h3",{attrs:{id:"setting-up-the-class-path"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-class-path"}},[t._v("#")]),t._v(" Setting Up the Class Path")]),t._v(" "),e("h4",{attrs:{id:"with-maven"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#with-maven"}},[t._v("#")]),t._v(" With Maven")]),t._v(" "),e("p",[t._v("Using Maven is the recommended way to integrate the generated project into your software product.\nAdd the following dependency to the POM for your software product:")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${groupId}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${artifactId}-keygen"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${version}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("Assuming the property values of the page "),e("RouterLink",{attrs:{to:"/guide/getting-started.html"}},[t._v("Getting Started")]),t._v(", this would expand to:")],1),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.company.product"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("stargazer-keygen"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h4",{attrs:{id:"without-maven"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#without-maven"}},[t._v("#")]),t._v(" Without Maven")]),t._v(" "),e("p",[t._v("Without a build tool, you need to manually add the JARs of the project to the classpath of your software product.")]),t._v(" "),e("p",[t._v("You can add the standalone JAR "),e("code",[t._v("keygen/target/${artifactId}-keygen-${version}-standalone.jar")]),t._v(" to the classpath.\nThis is convenient because the standalone JAR contains all transitive dependencies, so you only need to add this JAR to\nthe classpath.")]),t._v(" "),e("p",[t._v("If some dependencies bundled in the standalone JAR conflict with other dependencies of your software product however,\nthen you may need to add only selected JARs to the class path.\nFirst, copy the runtime dependencies to the directory "),e("code",[t._v("keygen/target/dependency")]),t._v(" using:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("/usr/libexec/java_home -v "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on macOS only")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x mvnw\n$ ./mvnw package dependency:copy-dependencies -DincludeScope"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("runtime --projects keygen\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" keygen/target/dependency\nfun-io-api-2.3.0.jar             jackson-annotations-2.10.2.jar   truelicense-core-4.0.3.jar\nfun-io-bios-2.3.0.jar            jackson-core-2.10.2.jar          truelicense-obfuscate-4.0.3.jar\nfun-io-jackson-2.3.0.jar         jackson-databind-2.10.2.jar      truelicense-spi-4.0.3.jar\nfun-io-spi-2.3.0.jar             truelicense-api-4.0.3.jar        truelicense-v4-4.0.3.jar\n")])])]),e("p",[t._v("Now you can select each JAR which you want to add to the classpath from this directory.\nDon’t forget to add the regular JAR "),e("code",[t._v("keygen/target/${artifactId}-keygen-${version}.jar")]),t._v(" to the classpath, too.")]),t._v(" "),e("h3",{attrs:{id:"introduction-to-the-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-the-api"}},[t._v("#")]),t._v(" Introduction to the API")]),t._v(" "),e("p",[t._v("When building your project, the following classes get generated from a set of Apache Velocity template files - listed in\nalphabetic order:")]),t._v(" "),e("dl",[e("dt",[e("strong",[e("code",[t._v("com.company.product.keygen.LicenseManager")])])]),t._v(" "),e("dd",[e("p",[t._v("The enumeration of the vendor license managers for your software product.\nThe managers get named like each configured edition and ordered from superset to subset.\nEach manager gets configured with the algorithms and parameters for generating license keys for the respective\nedition.")]),t._v(" "),e("p")]),t._v(" "),e("dt",[e("strong",[e("code",[t._v("com.company.product.keygen.Main")])])]),t._v(" "),e("dd",[e("p",[t._v("The command line interface for vending license keys.")])])]),t._v(" "),e("p",[t._v("The main entry point to the API is the enumeration class "),e("code",[t._v("LicenseManager")]),t._v(".\nFor example, if the project sets the property "),e("code",[t._v("editions")]),t._v(" to "),e("code",[t._v("enterprise standard")]),t._v(", then this class looks as follows:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("company"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keygen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VendorLicenseManager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    enterprise "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    standard "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("For the following examples, it’s necessary to add the following imports:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("company"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keygen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fun"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("truelicense"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fun"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bios")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BIOS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"generating-a-license-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#generating-a-license-key"}},[t._v("#")]),t._v(" Generating a License Key")]),t._v(" "),e("p",[t._v("You can generate a license key using:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VendorLicenseManager")]),t._v(" manager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("edition"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("License")]),t._v(" input "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" manager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("licenseFactory")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("license")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sink")]),t._v(" sink "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${license-key-path}"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("License")]),t._v(" output "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" manager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKeyFrom")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveTo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sink"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("license")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("… where "),e("code",[t._v("${edition}")]),t._v(" expands to an edition of your software product and "),e("code",[t._v("${license-key-path}")]),t._v(" expands to the path of the\nlicense key file.\nFor a fully elaborated example, please have a look at the "),e("code",[t._v("Main")]),t._v(" class.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("You can omit the last call to "),e("code",[t._v("license()")]),t._v(" if you are not interested in a duplicate of the saved (output) license bean.")])]),t._v(" "),e("h3",{attrs:{id:"working-with-runtime-exceptions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#working-with-runtime-exceptions"}},[t._v("#")]),t._v(" Working with Runtime Exceptions")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("VendorLicenseManager")]),t._v(" interface may throw a "),e("code",[t._v("LicenseManagementException")]),t._v(", which extends "),e("code",[t._v("GeneralSecurityException")]),t._v(",\nwhich in turn extends the checked "),e("code",[t._v("Exception")]),t._v(".\nWorking with checked exceptions may be cumbersome in contexts where a method gets constrained to only throw unchecked\nexceptions, e.g. when implementing functional interfaces like "),e("code",[t._v("Runnable.run()")]),t._v(".\nFor cases like this there is an adapter method named "),e("code",[t._v("VendorLicenseManager.unchecked()")]),t._v(":\nThis method adapts a vendor license manager so that it may throw a\n"),e("code",[t._v("UncheckedLicenseManagementException")]),t._v(", which extends the unchecked "),e("code",[t._v("RuntimeException")]),t._v(" and simply wraps the original\n"),e("code",[t._v("LicenseManagementException")]),t._v(".\nHere’s the general usage pattern:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VendorLicenseManager")]),t._v(" checkedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("edition"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UncheckedVendorLicenseManager")]),t._v(" uncheckedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" checkedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("unchecked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("License")]),t._v(" input "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uncheckedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("licenseFactory")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("license")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sink")]),t._v(" sink "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${license-key-path}"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("License")]),t._v(" output "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uncheckedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateKeyFrom")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveTo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sink"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("license")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("As you see, the call sequence is the same as in the previous example.\nYou can get back the original (checked) vendor license manager by calling:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UncheckedVendorLicenseManager")]),t._v(" uncheckedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VendorLicenseManager")]),t._v(" checkedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uncheckedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("checked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"using-the-key-manager-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-key-manager-api"}},[t._v("#")]),t._v(" Using the Key Manager API")]),t._v(" "),e("h3",{attrs:{id:"setting-up-the-class-path-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-class-path-2"}},[t._v("#")]),t._v(" Setting Up the Class Path")]),t._v(" "),e("h4",{attrs:{id:"with-maven-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#with-maven-2"}},[t._v("#")]),t._v(" With Maven")]),t._v(" "),e("p",[t._v("Using Maven is the recommended way to integrate the project into your software product.\nAdd the following dependency to the POM for your software product:")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${groupId}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${artifactId}-keymgr"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${version}"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("Assuming the property values of the page "),e("RouterLink",{attrs:{to:"/guide/getting-started.html"}},[t._v("Getting Started")]),t._v(", this would expand to:")],1),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.company.product"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("stargazer-keymgr"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0-SNAPSHOT"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h4",{attrs:{id:"without-maven-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#without-maven-2"}},[t._v("#")]),t._v(" Without Maven")]),t._v(" "),e("p",[t._v("Without Maven, you need to manually add the JARs of the project to the classpath of your software product.")]),t._v(" "),e("p",[t._v("You can add the standalone JAR "),e("code",[t._v("keymgr/target/${artifactId}-keymgr-${version}-standalone.jar")]),t._v(" to the classpath.\nThis is convenient because the standalone JAR contains all transitive dependencies, so you only need to add this JAR to\nthe classpath.")]),t._v(" "),e("p",[t._v("If some dependencies bundled in the standalone JAR conflict with other dependencies of your software product however,\nthen you may need to add only selected JARs to the class path.\nFirst, copy the runtime dependencies to the directory "),e("code",[t._v("keymgr/target/dependency")]),t._v(" using:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("/usr/libexec/java_home -v "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on macOS only")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x mvnw\n$ ./mvnw package dependency:copy-dependencies -DincludeScope"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("runtime --projects keymgr --also-make\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" keymgr/target/dependency\nfun-io-api-2.3.0.jar             jackson-core-2.10.2.jar          truelicense-spi-4.0.3.jar\nfun-io-bios-2.3.0.jar            jackson-databind-2.10.2.jar      truelicense-swing-4.0.3.jar\nfun-io-jackson-2.3.0.jar         truelicense-api-4.0.3.jar        truelicense-ui-4.0.3.jar\nfun-io-spi-2.3.0.jar             truelicense-core-4.0.3.jar       truelicense-v4-4.0.3.jar\njackson-annotations-2.10.2.jar   truelicense-obfuscate-4.0.3.jar\n")])])]),e("p",[t._v("Now you can select each JAR which you want to add to the classpath from this directory.\nDon’t forget to add the regular JAR "),e("code",[t._v("keymgr/target/${artifactId}-keymgr-${version}.jar")]),t._v(" to the classpath, too.")]),t._v(" "),e("h3",{attrs:{id:"introduction-to-the-api-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-the-api-2"}},[t._v("#")]),t._v(" Introduction to the API")]),t._v(" "),e("p",[t._v("When building your project, the following classes get generated from a set of Apache Velocity template files - listed in\nalphabetic order:")]),t._v(" "),e("dl",[e("dt",[e("strong",[e("code",[t._v("com.company.product.keymgr.LicenseManager")])])]),t._v(" "),e("dd",[e("p",[t._v("The enumeration of the consumer license managers for your software product.\nThe managers get named like each configured edition and ordered from superset to subset, including an optional FTP.\nEach manager gets configured with the algorithms and parameters for installing, loading, verifying and uninstalling\nlicense keys for the respective edition.")]),t._v(" "),e("p")]),t._v(" "),e("dt",[e("strong",[e("code",[t._v("com.company.product.keymgr.Main")])])]),t._v(" "),e("dd",[e("p",[t._v("The command line interface for consuming license keys.")])])]),t._v(" "),e("p",[t._v("The main entry point to the API is the enumeration class "),e("code",[t._v("LicenseManager")]),t._v(".\nxFor example, if the project sets the properties "),e("code",[t._v("editions")]),t._v(" and "),e("code",[t._v("freeTrialPeriod")]),t._v(" to "),e("code",[t._v("enterprise standard")]),t._v(" and "),e("code",[t._v("30")]),t._v("\nrespectively, then this class looks as follows:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("company"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keymgr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerLicenseManager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    enterprise "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    standard "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ftp "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ftp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Consumer license managers get arranged in a chain of responsibility, ordered from feature subset to feature superset\n(which is the reverse order of the items in the enumeration class "),e("code",[t._v("LicenseManager")]),t._v("):\nWhen installing, loading, verifying or uninstalling a license key, each operation gets tried using the parent manager\nfirst.\nIf the operation succeeds using the parent manager then the processing stops, otherwise the operation gets retried using\nthe child manager.\nThis repeats recursively until the operation either succeeds using some manager or no more managers are available,\nin which case a "),e("code",[t._v("LicenseManagementException")]),t._v(" gets thrown.")]),t._v(" "),e("p",[t._v("This design allows you to use the API for installing, loading, verifying and uninstalling license keys without knowing\nfor which edition a license key has been generated.\nTo facilitate this, the "),e("code",[t._v("LicenseManager")]),t._v(" class provides the "),e("code",[t._v("get()")]),t._v(" method which returns the first manager in the\nconfigured chain-of-responsibility.")]),t._v(" "),e("p",[t._v("For the following examples, it’s necessary to add the following imports:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("company"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keygen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fun"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("truelicense"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("global"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("namespace"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fun"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bios")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BIOS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"installing-a-license-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installing-a-license-key"}},[t._v("#")]),t._v(" Installing a License Key")]),t._v(" "),e("p",[t._v("You can install a license key using:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerLicenseManager")]),t._v(" manager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Source")]),t._v(" source "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${license-key-path}"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmanager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("… where "),e("code",[t._v("${license-key-path}")]),t._v(" expands to the path of the license key file.")]),t._v(" "),e("p",[e("code",[t._v("ConsumerLicenseManager.install(Source)")]),t._v(" recursively tries each consumer license manager until the given license key fits the\nrespective lock and saves it.\nIf the given file does not hold a license key for the lock of any license consumer manager, then a\n"),e("code",[t._v("LicenseManagementException")]),t._v(" gets thrown.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Assuming the previous configuration, "),e("code",[t._v("LicenseManager.get()")]),t._v(" is the same as "),e("code",[t._v("LicenseManager.ftp")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("It’s not necessary to know for which edition the license key has been generated.")])]),t._v(" "),e("h3",{attrs:{id:"loading-the-license-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loading-the-license-key"}},[t._v("#")]),t._v(" Loading the License Key")]),t._v(" "),e("p",[t._v("You can load the installed license key using:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("License")]),t._v(" bean "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("code",[t._v("ConsumerLicenseManager.load()")]),t._v(" recursively tries each consumer license manager until an installed license key gets\nfound and returns a duplicate of its encoded license bean.\nIf there is no license key installed, then a "),e("code",[t._v("LicenseManagementException")]),t._v(" gets thrown.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("This method does not validate the encoded license bean: For example, it’s term may have already expired.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("It’s not necessary to know for which edition the installed license key has been generated.")])]),t._v(" "),e("h3",{attrs:{id:"verifying-the-license-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#verifying-the-license-key"}},[t._v("#")]),t._v(" Verifying the License Key")]),t._v(" "),e("p",[t._v("You can verify the installed license key using:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("You need to call this method before you want to access a licensed feature of your software product!")]),t._v(" "),e("p",[e("code",[t._v("ConsumerLicenseManager.verify()")]),t._v(" recursively tries each consumer license manager until an installed license key gets\nfound which passes the validation function, too.\nIf there is no license key installed, then a "),e("code",[t._v("LicenseManagementException")]),t._v(" gets thrown.\nIf there is a license key installed, but the encoded license bean is invalid, then a "),e("code",[t._v("LicenseValidationException")]),t._v(" gets\nthrown.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Calling this method frequently ensures that your software product detects any license term expiration as soon as\npossible.\nYou don’t need to worry about performance:\nTrueLicense maintains a time sensitive cache in order to speed up subsequent processing.\nFor example, on an Intel i7 at 2.2 GHz, once there is a valid V2/JSON license key installed, you can get about 9.5\nmillion successful license key verifications in a single thread!\nOf course, this depends not only on the hardware, but also on the configuration of the licensing schema, so your mileage\nmay vary.")])]),t._v(" "),e("h4",{attrs:{id:"supporting-multiple-editions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#supporting-multiple-editions"}},[t._v("#")]),t._v(" Supporting Multiple Editions")]),t._v(" "),e("p",[t._v("The use case for verifying a license key is different from the use case for the other operations:\nWhen installing, loading or uninstalling a license key, it’s not relevant for which edition a license key has been\ngenerated.\nThe chain-of-responsibility pattern then ensures that these operations will succeed when calling them on\n"),e("code",[t._v("LicenseManager.get()")]),t._v(", which is the first manager in the chain.")]),t._v(" "),e("p",[t._v("However, when verifying access to a feature, then you want to make sure that access gets granted if and only if there is\na valid license key installed for the respective edition or any of its supersets, but not its subsets.\nTo do this, you need to directly use the instances of the enumeration class "),e("code",[t._v("LicenseManager")]),t._v(".\nFor example, assuming the same definition of this class, the following code accepts a valid license key for the\nenterprise edition only:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enterprise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("In contrast, the following code accepts a valid license key for the enterprise edition or the standard edition:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("standard"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Last but not least, the following code accepts a valid license key for the enterprise edition or the standard edition or\nthe FTP edition:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ftp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Note that modelling the FTP as an edition allows you to limit access to some features to registered customers only.\nEmploying this option is trivial:\nJust call "),e("code",[t._v("ConsumerLicenseManager.verify()")]),t._v(" on any license manager other than "),e("code",[t._v("LicenseManager.ftp")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"uninstalling-the-license-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uninstalling-the-license-key"}},[t._v("#")]),t._v(" Uninstalling the License Key")]),t._v(" "),e("p",[t._v("You can uninstall the license key using:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uninstall")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("code",[t._v("ConsumerLicenseManager.uninstall()")]),t._v(" recursively tries each consumer license manager until an installed license key gets\nfound and deletes it.\nIf there is no license key installed or it's only an auto-generated FTP license key, then a "),e("code",[t._v("LicenseManagementException")]),t._v("\ngets thrown.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("It’s not necessary to know for which edition the installed license key has been generated.")])]),t._v(" "),e("h3",{attrs:{id:"working-with-runtime-exceptions-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#working-with-runtime-exceptions-2"}},[t._v("#")]),t._v(" Working with Runtime Exceptions")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("ConsumerLicenseManager")]),t._v(" interface may throw a "),e("code",[t._v("LicenseManagementException")]),t._v(", which extends\n"),e("code",[t._v("GeneralSecurityException")]),t._v(", which in turn extends the checked "),e("code",[t._v("Exception")]),t._v(".\nWorking with checked exceptions may be cumbersome in contexts where a method gets constrained to only throw unchecked\nexceptions, e.g. when implementing functional interfaces like "),e("code",[t._v("Runnable.run()")]),t._v(".\nFor cases like this there is an adapter method named "),e("code",[t._v("ConsumerLicenseManager.unchecked()")]),t._v(":\nThis method adapts a consumer license manager so that it may throw an "),e("code",[t._v("UncheckedLicenseManagementException")]),t._v(", which\nextends the unchecked "),e("code",[t._v("RuntimeException")]),t._v(" and simply wraps the original "),e("code",[t._v("LicenseManagementException")]),t._v(".\nHere’s the general usage pattern:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerLicenseManager")]),t._v(" checkedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LicenseManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UncheckedConsumerLicenseManager")]),t._v(" uncheckedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" checkedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("unchecked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Source")]),t._v(" source "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${license-key-path}"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nuncheckedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("As you see, the call sequence is the same as in the previous example.\nYou can get back the original (checked) consumer license manager by calling:")]),t._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UncheckedConsumerLicenseManager")]),t._v(" uncheckedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerLicenseManager")]),t._v(" checkedManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uncheckedManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("checked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);